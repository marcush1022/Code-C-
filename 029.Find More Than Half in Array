/************************************************************************************************/
Find the numbers in an array, its appearance times more than the half of the length of the array.
example:
array={1,2,3,2,2,2,5,4,2}
return 2
/************************************************************************************************/

class Solution6
{
	public:
    	bool checkMoreThanHalf(vector<int> &nums, int num)
    	{
        	bool flag=true;
        	int count=0;
        	for(int i=0; i<nums.size(); i++)
        	{
            		if(nums[i]==num)
                	count++;
        	}
        	if(count*2<=nums.size())
            		flag=false;
        	return flag;
    	}

	int doPartition(vector<int> &nums, int left, int right)
	{
		int val=nums[right];
		for(int i=left; i<nums.size(); i++)
		{
			if(nums[i]<val)
				swap(nums[i], nums[left++]);
		}
		swap(nums[left], nums[right]);
		return left;
	}

	int getNumbersMoreThanHalf(vector<int> &nums)
	{
		int len=nums.size();
		if(len==0)
			return -1;
		int ans=0;
		int left=0, right=len-1;
		int pos=(left+right)/2;
		while((ans=doPartition(nums, left, right))!=pos)
		{
			if(ans>pos)
				right=ans-1;
			else
				left=ans+1;
		}
		if(!checkMoreThanHalf(nums, nums[pos]))
            		return -1;
		return nums[pos];
	}
};

int main()
{
	Solution6 s;
	vector<int> nums;
	nums.push_back(1);
	nums.push_back(2);
	nums.push_back(3);
	nums.push_back(2);

	nums.push_back(4);
	nums.push_back(5);
	cout<<s.getNumbersMoreThanHalf(nums);
}
